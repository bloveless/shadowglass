// Code generated by protoc-gen-go-wasm. DO NOT EDIT.

package tradersv1

import (
	fmt "fmt"
	proto "google.golang.org/protobuf/proto"
	unsafe "unsafe"
)

//go:wasmimport env send_get_my_ships_request_to_host
func sendGetMyShipsRequestToHost(ptr uint32, len uint32) uint32

//go:wasmimport env retrieve_get_my_ships_response_from_host
func retrieveGetMyShipsResponseFromHost(ptr uint32)

func GetMyShips(req GetMyShipsRequest) (Ships, error) {
	reqBuffer, err := proto.Marshal(&req)
	if err != nil {
		return Ships{}, fmt.Errorf("unable to marshal request: %w", err)
	}

	ptr := uint32(0)
	if len(reqBuffer) > 0 {
		ptr = uint32(uintptr(unsafe.Pointer(&reqBuffer[0])))
	}

	size := sendGetMyShipsRequestToHost(ptr, uint32(len(reqBuffer)))
	resBuffer := make([]byte, size)
	retrieveGetMyShipsResponseFromHost(uint32(uintptr(unsafe.Pointer(&resBuffer[0]))))

	var res Ships

	err = proto.Unmarshal(resBuffer, &res)
	if err != nil {
		return Ships{}, fmt.Errorf("unable to parse response from memory: %w", err)
	}

	return res, nil
}
